(function(){"use strict";var e={5471:function(e,l,t){var n=t(5130),a=(t(4114),t(8992),t(2577),t(3949),t(1454),t(7550),t(4603),t(7566),t(8721),t(6768)),u=t(144),o=t(4232),r=t(1219),s=t(47),c=t(1648),i=t(6810);const v={class:"outer-container"},d={class:"control-box"},p={class:"page-wrapper"},f={class:"mean-box"},g=["value"],k={class:"progress-bar-wrapper"},h={class:"progress-bar-container"},m={class:"progress-text"},b={class:"dialog-list"};var w={__name:"App",setup(e){const l=(0,u.KR)(""),t=(0,u.KR)("请上传单词本开始"),w=(0,u.KR)([]),y=(0,u.KR)([]),R=(0,u.KR)(null),_=(0,u.KR)(!1),L=(0,u.KR)(0),F=(0,u.KR)([]),x=(0,u.KR)(!0),C=(0,u.KR)("0%"),K=(0,u.KR)(0),O=(0,u.KR)(0),E=(0,u.KR)(!1),T=(0,u.KR)(1),$=(0,u.KR)([]),j=(0,u.KR)(!1),W=(0,u.KR)("words.txt"),S=()=>{R.value.click()},U=e=>{const l=e.target.files[0];if(l){const e=new FileReader;e.onload=e=>{const l=e.target.result,t=l.split("\n"),n=[];t.forEach((e=>{const[l,t]=e.split("|");l&&t&&n.push({word:l.trim(),meaning:t.trim()})})),w.value=n,K.value=n.length,O.value=0,L.value=0,y.value=[],F.value=[],C.value="0%",x.value=!0,E.value=!1,V(),A(),_.value=!0},e.readAsText(l)}},V=()=>{const e=w.value;switch(T.value){case 0:$.value=e.slice();break;case 1:$.value=e.slice().sort((()=>Math.random()-.5));break;case 2:$.value=e.slice().sort(((e,l)=>e.word.localeCompare(l.word)));break}},q=()=>{if(0===O.value)(0,r.nk)({message:"你还未开始测试！",type:"info",duration:3e3});else{const e=O.value,l=F.value.length,n=((e-l)/e*100).toFixed(2);t.value=`测试结束，本次测试单词数：${e}，错误单词数：${l}，正确率：${n}%`,x.value=!1,E.value=F.value.length>0}},A=()=>{if(0===$.value.length){if(0===w.value.length)t.value="单词本为空，请重新上传有效文件";else{0===F.value.length&&(0,r.nk)({message:"卧槽，文曲星下凡，一个都没错！",grouping:!0,type:"success"});const e=O.value+1,l=F.value.length,n=((e-l)/e*100).toFixed(2);t.value=`测试完成，本次测试单词数：${e}，错误单词数：${l}，正确率：${n}%`,x.value=!1,C.value="100%",E.value=F.value.length>0}return}const e=$.value.shift();t.value=e.meaning,B(),L.value=0,console.log(`当前展示单词: ${e.word}, 释义: ${e.meaning}`)},M=e=>{l.value=e.target.value},D=()=>{const e=l.value.trim(),n=w.value.find((e=>e.meaning===t.value));if(e.toLowerCase()===n?.word.toLowerCase())y.value.push(n),A(),l.value="",L.value=0,O.value++,document.querySelector(".english-input").style.color="red";else{L.value++,3===L.value?((0,r.nk)({message:"Tips：按下Tab键会有奇迹哦",grouping:!0,type:"error"}),document.querySelector(".english-input").style.color="gray"):L.value>3&&(document.querySelector(".english-input").style.color="gray");const e=document.querySelector(".english-input");e&&(e.classList.add("shake"),setTimeout((()=>{e.classList.remove("shake")}),500))}B()},I=(0,u.KR)(null),Q=()=>{I.value&&I.value.toggleDropdown()},X=()=>{I.value&&I.value.show()},P=()=>{I.value&&I.value.hide()},Y=()=>{const e=F.value.map((e=>e)).join("\n"),l=new Blob([e],{type:"text/plain"}),t=URL.createObjectURL(l),n=document.createElement("a");n.href=t,n.download="recorded_words.txt",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t)},B=()=>{const e=O.value/K.value*100;C.value=`${e}%`},Z=()=>{O.value=0,L.value=0,y.value=[],F.value=[],C.value="0%",x.value=!0,V(),A()},z=e=>{"nce1"===e?W.value="nce1-words":"nce2"===e?W.value="nce2_words":"nce3"===e?W.value="nce3_words":"nce4"===e&&(W.value="nce4_words");const l=`/${W.value}.txt`;fetch(l).then((e=>e.text())).then((e=>{const l=e.split("\n"),t=[];l.forEach((e=>{const[l,n]=e.split("|");t.push({word:l.trim(),meaning:n.trim()})})),w.value=t,K.value=t.length,V(),A(),_.value=!0,Z()})).catch((()=>{(0,r.nk)({message:"单词书读取失败！",grouping:!0,type:"error"})})),j.value=!1},G=()=>{j.value=!0};let H;return(0,a.sV)((()=>{R.value.addEventListener("change",U);const e="/nce1-words.txt";fetch(e).then((e=>e.text())).then((e=>{const l=e.split("\n"),t=[];l.forEach((e=>{const[l,n]=e.split("|");t.push({word:l.trim(),meaning:n.trim()})})),w.value=t,K.value=t.length,V(),A(),_.value=!0})).catch((()=>{(0,r.nk)({message:"单词书读取失败！",grouping:!0,type:"error"})})),H=e=>{const n=document.querySelector(".english-input");if("Tab"===e.key&&n===document.activeElement){e.preventDefault();const u=w.value.find((e=>e.meaning===t.value));u&&!F.value.some((e=>e.startsWith(u.word)))&&(l.value=u.word,F.value.push(`${u.word}|${u.meaning}`)),(0,a.dY)((()=>{n.focus()}))}},document.addEventListener("keydown",H)})),(0,a.xo)((()=>{document.removeEventListener("keydown",H)})),(e,r)=>{const w=(0,a.g2)("el-dropdown-item"),y=(0,a.g2)("el-dropdown-menu"),L=(0,a.g2)("el-dropdown"),F=(0,a.g2)("el-header"),$=(0,a.g2)("el-main"),W=(0,a.g2)("el-footer"),U=(0,a.g2)("el-container"),V=(0,a.g2)("el-card"),A=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.CE)("div",v,[(0,a.Lk)("div",d,[(0,a.bF)(L,{placement:"top-start"},{dropdown:(0,a.k6)((()=>[(0,a.bF)(y,null,{default:(0,a.k6)((()=>[(0,a.bF)(w,null,{default:(0,a.k6)((()=>[(0,a.Lk)("p",{onClick:S},"上传"),(0,a.Lk)("input",{type:"file",ref_key:"fileInput",ref:R,style:{display:"none"},accept:".txt"},null,512)])),_:1}),(0,a.bF)(w,{onClick:G},{default:(0,a.k6)((()=>r[7]||(r[7]=[(0,a.eW)(" 词库 ")]))),_:1}),(0,a.bF)(w,{onClick:q},{default:(0,a.k6)((()=>r[8]||(r[8]=[(0,a.eW)("结束")]))),_:1})])),_:1})])),default:(0,a.k6)((()=>[(0,a.bF)((0,u.R1)(s.S2),{onClick:Q,onMouseenter:X,onMouseleave:P},{default:(0,a.k6)((()=>r[6]||(r[6]=[(0,a.eW)("菜单")]))),_:1})])),_:1}),(0,a.bF)((0,u.R1)(c.R7),{effect:"dark",content:"选择测试模式，注意这会重新载入单词",placement:"top"},{default:(0,a.k6)((()=>[(0,a.bF)((0,u.R1)(i.MQ),{modelValue:T.value,"onUpdate:modelValue":r[0]||(r[0]=e=>T.value=e),onChange:Z},{default:(0,a.k6)((()=>[(0,a.bF)((0,u.R1)(i.ll),{label:0},{default:(0,a.k6)((()=>r[9]||(r[9]=[(0,a.eW)("顺序")]))),_:1}),(0,a.bF)((0,u.R1)(i.ll),{label:1},{default:(0,a.k6)((()=>r[10]||(r[10]=[(0,a.eW)("乱序")]))),_:1}),(0,a.bF)((0,u.R1)(i.ll),{label:2},{default:(0,a.k6)((()=>r[11]||(r[11]=[(0,a.eW)("A-Z排序")]))),_:1})])),_:1},8,["modelValue"])])),_:1})]),(0,a.Lk)("div",p,[(0,a.bF)(V,{class:"main-card"},{default:(0,a.k6)((()=>[(0,a.bF)(U,null,{default:(0,a.k6)((()=>[(0,a.bF)(F,{class:"header"},{default:(0,a.k6)((()=>r[12]||(r[12]=[(0,a.Lk)("h1",null,"TEST YOUR WORDS",-1)]))),_:1}),(0,a.bF)($,{class:"main-content"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",f,[(0,a.Lk)("p",null,(0,o.v_)(t.value),1)]),_.value?((0,a.uX)(),(0,a.CE)("input",{key:0,placeholder:"Type the English word here",value:l.value,onInput:M,class:"english-input",onKeydown:(0,n.jR)(D,["enter"]),style:(0,o.Tr)({display:x.value?"block":"none"})},null,44,g)):(0,a.Q3)("",!0),(0,a.bF)((0,u.R1)(c.R7),{effect:"light",content:"下载错误单词本",placement:"top"},{default:(0,a.k6)((()=>[E.value?((0,a.uX)(),(0,a.Wv)((0,u.R1)(s.S2),{key:0,type:"success",onClick:Y},{default:(0,a.k6)((()=>r[13]||(r[13]=[(0,a.eW)("下载")]))),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1}),(0,a.bF)(W,{class:"footer"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",k,[(0,a.Lk)("div",h,[(0,a.Lk)("div",{class:"progress-bar",style:(0,o.Tr)({width:C.value})},null,4)]),(0,a.Lk)("div",m,(0,o.v_)(O.value)+" / "+(0,o.v_)(K.value),1)])])),_:1})])),_:1})])),_:1})]),(0,a.bF)(A,{title:"新概念词库",modelValue:j.value,"onUpdate:modelValue":r[5]||(r[5]=e=>j.value=e)},{default:(0,a.k6)((()=>[(0,a.Lk)("ul",b,[(0,a.Lk)("li",{onClick:r[1]||(r[1]=e=>z("nce1"))},"新概念第1册"),(0,a.Lk)("li",{onClick:r[2]||(r[2]=e=>z("nce2"))},"新概念第2册"),(0,a.Lk)("li",{onClick:r[3]||(r[3]=e=>z("nce3"))},"新概念第3册"),(0,a.Lk)("li",{onClick:r[4]||(r[4]=e=>z("nce4"))},"新概念第4册")])])),_:1},8,["modelValue"])])}}},y=t(1241);const R=(0,y.A)(w,[["__scopeId","data-v-ad0d8f68"]]);var _=R,L=t(4614);t(4188);const F=(0,n.Ef)(_);F.use(L.A),F.mount("#app")}},l={};function t(n){var a=l[n];if(void 0!==a)return a.exports;var u=l[n]={exports:{}};return e[n].call(u.exports,u,u.exports,t),u.exports}t.m=e,function(){var e=[];t.O=function(l,n,a,u){if(!n){var o=1/0;for(i=0;i<e.length;i++){n=e[i][0],a=e[i][1],u=e[i][2];for(var r=!0,s=0;s<n.length;s++)(!1&u||o>=u)&&Object.keys(t.O).every((function(e){return t.O[e](n[s])}))?n.splice(s--,1):(r=!1,u<o&&(o=u));if(r){e.splice(i--,1);var c=a();void 0!==c&&(l=c)}}return l}u=u||0;for(var i=e.length;i>0&&e[i-1][2]>u;i--)e[i]=e[i-1];e[i]=[n,a,u]}}(),function(){t.n=function(e){var l=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(l,{a:l}),l}}(),function(){t.d=function(e,l){for(var n in l)t.o(l,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:l[n]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)}}(),function(){var e={524:0};t.O.j=function(l){return 0===e[l]};var l=function(l,n){var a,u,o=n[0],r=n[1],s=n[2],c=0;if(o.some((function(l){return 0!==e[l]}))){for(a in r)t.o(r,a)&&(t.m[a]=r[a]);if(s)var i=s(t)}for(l&&l(n);c<o.length;c++)u=o[c],t.o(e,u)&&e[u]&&e[u][0](),e[u]=0;return t.O(i)},n=self["webpackChunktype_word"]=self["webpackChunktype_word"]||[];n.forEach(l.bind(null,0)),n.push=l.bind(null,n.push.bind(n))}();var n=t.O(void 0,[504],(function(){return t(5471)}));n=t.O(n)})();
//# sourceMappingURL=app.64400ef3.js.map